{"version":3,"file":"release.js","sourceRoot":"","sources":["../../../src/js/integrations/release.ts"],"names":[],"mappings":";;AAAA,qCAAsE;AAEtE,uCAAgD;AAEhD,2CAA2C;AAC3C;IAAA;QACE;;WAEG;QACI,SAAI,GAAW,OAAO,CAAC,EAAE,CAAC;IAsCnC,CAAC;IAhCC;;OAEG;IACI,2BAAS,GAAhB;QACE,8BAAuB,CAAC,UAAC,KAAY;YACnC,IAAM,IAAI,GAAG,oBAAa,EAAE,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YACrD,IAAI,CAAC,IAAI,EAAE;gBACT,OAAO,KAAK,CAAC;aACd;YAED,IAAM,MAAM,GAAQ,uBAAe,EAAO,CAAC;YAC3C,gFAAgF;YAChF,gFAAgF;YAChF,IAAI,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC,gBAAgB,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;gBACjE,KAAK,CAAC,OAAO,GAAG,KAAG,KAAK,CAAC,KAAK,CAAC,gBAAkB,CAAC;aACnD;YACD,IAAI,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC,aAAa,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;gBAC3D,KAAK,CAAC,IAAI,GAAG,KAAG,KAAK,CAAC,KAAK,CAAC,aAAe,CAAC;aAC7C;YAED,0CAA0C;YAC1C,IAAM,OAAO,GAAG,MAAM,CAAC,cAAc,IAAI,MAAM,CAAC,cAAc,CAAC,EAAE,CAAC;YAClE,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;gBAC7B,KAAK,CAAC,OAAO,GAAG,OAAiB,CAAC;gBAClC,KAAK,CAAC,KAAK,yCACN,KAAK,CAAC,KAAK,KACd,gBAAgB,EAAE,OAAO,GAC1B,CAAC;aACH;YACD,OAAO,KAAK,CAAC;QACf,CAAC,CAAC,CAAC;IACL,CAAC;IApCD;;OAEG;IACW,UAAE,GAAW,SAAS,CAAC;IAkCvC,cAAC;CAAA,AA1CD,IA0CC;AA1CY,0BAAO","sourcesContent":["import { addGlobalEventProcessor, getCurrentHub } from '@sentry/core';\nimport { Event, Integration } from '@sentry/types';\nimport { getGlobalObject } from '@sentry/utils';\n\n/** Default Breadcrumbs instrumentations */\nexport class Release implements Integration {\n  /**\n   * @inheritDoc\n   */\n  public name: string = Release.id;\n  /**\n   * @inheritDoc\n   */\n  public static id: string = 'Release';\n\n  /**\n   * @inheritDoc\n   */\n  public setupOnce(): void {\n    addGlobalEventProcessor((event: Event) => {\n      const self = getCurrentHub().getIntegration(Release);\n      if (!self) {\n        return event;\n      }\n\n      const window: any = getGlobalObject<any>();\n      // __sentry_release & __sentry_dist will be picked up by our native integration.\n      // It should live in extra, native will pic it up there and set it in the event.\n      if (event.extra && event.extra.__sentry_release && !event.release) {\n        event.release = `${event.extra.__sentry_release}`;\n      }\n      if (event.extra && event.extra.__sentry_dist && !event.dist) {\n        event.dist = `${event.extra.__sentry_dist}`;\n      }\n\n      // tslint:disable-next-line: no-unsafe-any\n      const release = window.SENTRY_RELEASE && window.SENTRY_RELEASE.id;\n      if (release && !event.release) {\n        event.release = release as string;\n        event.extra = {\n          ...event.extra,\n          __sentry_release: release,\n        };\n      }\n      return event;\n    });\n  }\n}\n"]}