{"version":3,"file":"normalize.js","sourceRoot":"","sources":["../../src/js/normalize.ts"],"names":[],"mappings":";AAAA,IAAM,aAAa,GAAG,sCAAsC,CAAC;AAE7D;;GAEG;AACH,SAAgB,YAAY,CAAC,GAAW,EAAE,WAAmB;IAC3D,OAAO,WAAS,GAAG,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAG,CAAC;AAC5E,CAAC;AAFD,oCAEC;AAED;;;GAGG;AACH,SAAgB,aAAa,CAAC,IAAS;IACrC,IAAI,IAAI,CAAC,OAAO,EAAE;QAChB,IAAI,CAAC,OAAO,GAAG,YAAY,CAAC,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;KAC1D;IACD,IAAM,UAAU,GACd,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;IACtG,IAAI,UAAU,EAAE;QACd,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,KAAU;YACnC,IAAI,KAAK,CAAC,QAAQ,KAAK,eAAe,IAAI,KAAK,CAAC,QAAQ,KAAK,aAAa,EAAE;gBAC1E,KAAK,CAAC,QAAQ,GAAG,YAAY,CAAC,KAAK,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;aAC9D;QACH,CAAC,CAAC,CAAC;KACJ;IACD,OAAO,IAAI,CAAC;AACd,CAAC;AAdD,sCAcC","sourcesContent":["const PATH_STRIP_RE = /^.*\\/[^\\.]+(\\.app|CodePush|.*(?=\\/))/;\n\n/**\n *  Normalize url in stacktrace\n */\nexport function normalizeUrl(url: string, pathStripRe: RegExp): string {\n  return `app://${url.replace(/^file\\:\\/\\//, '').replace(pathStripRe, '')}`;\n}\n\n/**\n * Normalizes the stacktrace\n * @param data\n */\nexport function normalizeData(data: any): any {\n  if (data.culprit) {\n    data.culprit = normalizeUrl(data.culprit, PATH_STRIP_RE);\n  }\n  const stacktrace =\n    data.stacktrace || (data.exception && data.exception.values && data.exception.values[0].stacktrace);\n  if (stacktrace) {\n    stacktrace.frames.forEach((frame: any) => {\n      if (frame.filename !== '[native code]' && frame.filename !== '<anonymous>') {\n        frame.filename = normalizeUrl(frame.filename, PATH_STRIP_RE);\n      }\n    });\n  }\n  return data;\n}\n"]}