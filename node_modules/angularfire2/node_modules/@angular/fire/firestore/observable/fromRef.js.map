{"version":3,"file":"fromRef.js","sourceRoot":"","sources":["../../../../src/firestore/observable/fromRef.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAc,MAAM,MAAM,CAAC;AAE9C,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,gBAAgB,CAAC;AAE5C,SAAS,QAAQ,CAAO,GAAiB;IACvC,OAAO,IAAI,UAAU,CAAC,UAAA,UAAU;QAC9B,IAAM,WAAW,GAAG,GAAG,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QAC/C,OAAO,EAAE,WAAW,aAAA,EAAE,CAAC;IACzB,CAAC,CAAC,CAAC;AACL,CAAC;AAED,MAAM,UAAU,OAAO,CAAI,GAA8B;IACvD,OAAO,QAAQ,CAAgB,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;AACpD,CAAC;AAED,MAAM,UAAU,UAAU,CAAI,GAAsB;IAClD,OAAO,OAAO,CAAsB,GAAG,CAAC;SACrC,IAAI,CACH,GAAG,CAAC,UAAA,OAAO,IAAI,OAAA,CAAC,EAAE,OAAO,SAAA,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,EAA5B,CAA4B,CAAC,CAC7C,CAAC;AACN,CAAC;AAED,MAAM,UAAU,iBAAiB,CAAI,GAAU;IAC7C,OAAO,OAAO,CAAmB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,UAAA,OAAO,IAAI,OAAA,CAAC,EAAE,OAAO,SAAA,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,EAA5B,CAA4B,CAAC,CAAC,CAAC;AAC3F,CAAC","sourcesContent":["import { Observable, Subscriber } from 'rxjs';\nimport { DocumentReference, Query, Action, Reference, DocumentSnapshot, QuerySnapshot } from '../interfaces';\nimport { map, share } from 'rxjs/operators';\n\nfunction _fromRef<T, R>(ref: Reference<T>): Observable<R> {\n  return new Observable(subscriber => {\n    const unsubscribe = ref.onSnapshot(subscriber);\n    return { unsubscribe };\n  });\n}\n\nexport function fromRef<R>(ref: DocumentReference | Query) {\n  return _fromRef<typeof ref, R>(ref).pipe(share());\n}\n\nexport function fromDocRef<T>(ref: DocumentReference): Observable<Action<DocumentSnapshot<T>>>{\n  return fromRef<DocumentSnapshot<T>>(ref)\n    .pipe(\n      map(payload => ({ payload, type: 'value' }))\n    );\n}\n\nexport function fromCollectionRef<T>(ref: Query): Observable<Action<QuerySnapshot<T>>> {\n  return fromRef<QuerySnapshot<T>>(ref).pipe(map(payload => ({ payload, type: 'query' })));\n}\n"]}